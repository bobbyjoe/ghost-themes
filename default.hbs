<!DOCTYPE html>
<html>
    <head>
        {{! Document Settings }}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        {{! Page Meta }}
        <title>{{meta_title}}</title>
        <meta name="description" content="{{meta_description}}" />
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" href="{{asset "/favicon.ico"}}">

        {{! CSS  }}
        <link href='http://fonts.googleapis.com/css?family=Lato:300,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="{{asset "css/screen.css"}}">
        
        {{! Ghost outputs important style and meta data with this tag }}
        {{ghost_head}}

    </head>
    <body class="{{body_class}}">

        <header class="site-header">
            {{> "header"}}                  
        </header>

        {{#if @blog.cover}}
        <main class="animated fadeIn" id="main" role="main" style="margin-top: 65px;">
        {{else}}
        <main class="animated fadeIn" id="main" role="main">
        {{/if}}
            {{{body}}}
        </main>

        <footer class="site-footer">
            {{> "footer"}}
        </footer>

        {{! Ghost outputs important scripts and data with this tag }}
        {{ghost_foot}}

        <script type="text/javascript"> 
            //Load jQuery if it doesn't exist
            if (typeof jQuery == 'undefined') {
                document.write('<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></'+'script>');
            }
            
            function onSuccess(data) {
                var $result = $('#test-list');    
                $.each(data.tags, function (i, tag) {
                    $result.append(
                        '<li><a href="/tag/' + tag.slug + '/">' + tag.name + '</a></li>'
                    );
                });
            }   

            function onSuccessSearch(data) {
                var $result = $('#test-search');
                $.each(data, function(i, element) {
                    $result.append(
                        '<tr><td> name:' + element.name + '</td>' +
                        '<td> address:' + element.address.street + '</td>' +
                        '<td> geo.lat:' + element.address.geo.lat + '</td>' + 
                        '<td> geo.lng:' + element.address.geo.lng + '</td></tr>'
                    );
                });
            }             

            jQuery(document).ready(function () {
              $.get(
                ghost.url.api('tags', {
                  limit: 'all', 
                  include: 'count.posts', 
                  order: 'count.posts DESC'
                })
              ).done(onSuccess);
            });

            var root = 'http://jsonplaceholder.typicode.com';            
            jQuery(document).ready(function () {
                $.get(root + '/users/')
                    .done(onSuccessSearch);
            });
        </script>

        <script src="{{asset "js/theme-options.js"}}"></script>
        <script src="{{asset "js/main.min.js"}}"></script>
    </body>
</html>
